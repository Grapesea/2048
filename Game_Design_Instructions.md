# 2048小游戏设计整体思路

<center>参考游戏源：https://2048.gg/zh</center>



## 得分/胜负判定

### 负判定

整个$4\times 4$面板都被数字占领，且对于每个数字而言，与它上下左右相邻的数字均与它不同（即无法再通过移动将两个方格消去）



举例：

<img src="Readme_photos\1.png" alt="1" style="zoom: 33%;" />



### 胜判定

原教旨：将2048合成出来即可；



魔改版：以某一个边角为开始，制造出以下矩阵：

$$\begin{bmatrix} 2 & 4 & 8 & 16 \\ 32 & 64 & 128 & 256 \\ 512 & 1024 & 2048 & 4096 \\ 8192 & 16384 & 32768 & 65536 \end{bmatrix}$$

（实在是过于困难了）



**本游戏不设置判定胜的规则.**



### 得分计算

合成出的数字会被计入总分中，例如$2+2 = 4$，于是总分+4；

在一次移动中如果有多组合成，按分数叠加计算.



## 移动细节

### 位置关系的描述

与日常生活略有区别的是，我们定义方块的“相邻”为以下两种情况：

1. 处于相邻的方格中；
2. 去除行或者列中间的所有空格，可以化为1种情况的两个方格.

举例：2.2的状态2图中，2 2 和 4 4 都是上下相邻的，但图1中的2 2不相邻.



### 普通的移动（无消去，不得分）

操作方法：在键盘上按上下左右，比如在以下局面按“左”：

<img src="Readme_photos\2.png" alt="2" style="zoom:33%;" />

<center>图1-状态1</center>



对于每一个具有数字的行来说，所有数字全部按原有顺序排列左移至边界，并不留任何中间空隙，即该行所有数字左侧的所有空位都会被清除；

（下图中上方的“4”是随机刷新的数字，会在下文中提到）



<img src="Readme_photos\3.png" alt="3" style="zoom:33%;" />

<center>图2-状态2</center>



类似地，对于普通的“上”操作，对于每一个具有数字的列来说，所有数字全部按原有顺序排列上移至边界，并不留任何中间空隙，即该列所有数字上方的所有空位都会被清除；

对于普通的“下”操作，对于每一个具有数字的列来说，所有数字全部按原有顺序排列下移至边界，并不留任何中间空隙，即该行所有数字下方的所有空位都会被清除；

对于普通的“右”操作，对于每一个具有数字的行来说，所有数字全部按原有顺序排列右移至边界，并不留任何中间空隙，即该行所有数字右侧的所有空位都会被清除.



### 能得分的消去式移动

#### 多状态同时消去

如图3所示是状态2的延续，在图2的基础上进行了“下”操作，同时合成了4和8，于是当前总分为$4(\text{上一状态的得分})+4\text{(本轮状态合成数字4)}+8\text{(本轮状态合成数字8)} = 16$ .



<img src="Readme_photos\4.png" alt="4" style="zoom:33%;" />

<center>图3-状态3</center>

消去后，所得方块所处的位置应该是二者合体后与同行/列所有块的遵循移动后位置关系的放置，即上下左右相对关系未改变.



#### 复杂的消去

此处的复杂消去指的是同行/列中同时具有3-4个同样数字的方块并执行了左右/上下的操作.

##### 同时具有3个的消去举例：

<img src="Readme_photos\5.png" alt="5" style="zoom:33%;" />

<center>图4-状态4</center>

当前最右边的一列是三个2自上而下排列，现在执行“下”操作，有：



<img src="Readme_photos\6.png" alt="6" style="zoom:33%;" />

<center>图5-状态5</center>

可以看到，最下端的两个2合成了4，最上端的2不变，仅移动.



规则总结：当执行“左”操作且有一行恰好有3个方块“相邻”时，优先合并左侧的两个方块，其余同普通的移动；

当执行“右”操作且有一行恰好有3个方块“相邻”时，优先合并右侧的两个方块，其余同普通的移动；

当执行“上”操作且有一行恰好有3个方块“相邻”时，优先合并上端的两个方块，其余同普通的移动；

当执行“下”操作且有一行恰好有3个方块“相邻”时，优先合并下端的两个方块，其余同普通的移动.



##### 同时具有4个的消去举例：





<img src="Readme_photos\7.png" alt="7" style="zoom: 33%;" />





<img src="Readme_photos\8.png" alt="8" style="zoom:33%;" />



规则总结：当执行“左”或者“右”操作且有一行恰好有4个方块“相邻”时，合并右侧的两个方块以及右侧的两个方块，其余同普通的移动；

当执行“上”或者“下”操作且有一列恰好有4个方块“相邻”时，合并上端的两个方块以及下端的两个方块，其余同普通的移动.



### 游戏的推进

每次操作完后，后台系统都要在空白的格子上放置一个新的方块.

注意：只能放置 2 或者 4 .



放置的同时，需要完成判定是否得分、得几分 以及是否已经处于“负”的状态.



## 游戏视觉效果

### 方块

对每个色块进行不同的颜色呈现，2-256的方块颜色举例如下：

<img src="Readme_photos\1-1.png" alt="1-1" style="zoom:25%;" />

<img src="Readme_photos\1-2.png" alt="1-2" style="zoom:25%;" />

<img src="Readme_photos\1-3.png" alt="1-3" style="zoom:25%;" />

<img src="Readme_photos\1-4.png" alt="1-4" style="zoom:25%;" />

<img src="Readme_photos\1-5.png" alt="1-5" style="zoom:25%;" />

<img src="Readme_photos\1-6.png" alt="1-6" style="zoom: 25%;" />

<img src="Readme_photos\1-7.png" alt="1-7" style="zoom:25%;" />

<img src="Readme_photos\1-8.png" alt="1-8" style="zoom:25%;" />



### 移动/消去效果

最好是较快的滑动式的视觉效果，较为流畅.



